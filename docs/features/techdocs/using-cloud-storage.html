<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Using Cloud Storage for TechDocs generated files · Backstage Software Catalog and Developer Platform</title><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Using Cloud Storage for TechDocs generated files"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Using Cloud Storage for TechDocs generated files · Backstage Software Catalog and Developer Platform"/><meta property="og:type" content="website"/><meta property="og:url" content="https://backstage.io/"/><meta property="og:description" content="Using Cloud Storage for TechDocs generated files"/><meta property="og:image" content="https://backstage.io/img/sharing-opengraph.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://backstage.io/img/twitter-summary.png"/><link rel="shortcut icon" href="/img/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/monokai.min.css"/><link rel="alternate" type="application/atom+xml" href="https://backstage.io/blog/atom.xml" title="Backstage Software Catalog and Developer Platform Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://backstage.io/blog/feed.xml" title="Backstage Software Catalog and Developer Platform Blog RSS Feed"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-163836834-5', 'auto');
              ga('send', 'pageview');
            </script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=IBM+Plex+Mono:500,700&amp;display=swap"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://unpkg.com/medium-zoom@1.0.6/dist/medium-zoom.min.js"></script><script type="text/javascript" src="/js/medium-zoom.js"></script><script type="text/javascript" src="/js/dismissable-banner.js"></script><script type="text/javascript" src="/js/scroll-nav-to-view-in-docs.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><h2 class="headerTitle">Backstage Software Catalog and Developer Platform</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="https://github.com/backstage/backstage" target="_self">GitHub</a></li><li class="siteNavGroupActive"><a href="/docs/overview/what-is-backstage" target="_self">Docs</a></li><li class=""><a href="/plugins" target="_self">Plugins</a></li><li class=""><a href="/blog" target="_self">Blog</a></li><li class=""><a href="/docs/releases/v1.0.0" target="_self">Releases</a></li><li class=""><a href="/demos" target="_self">Demos</a></li><li class=""><a href="/community" target="_self">Community</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>TechDocs</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Overview<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/overview/what-is-backstage">What is Backstage?</a></li><li class="navListItem"><a class="navItem" href="/docs/overview/architecture-overview">Architecture overview</a></li><li class="navListItem"><a class="navItem" href="/docs/overview/roadmap">Roadmap</a></li><li class="navListItem"><a class="navItem" href="/docs/overview/vision">Vision</a></li><li class="navListItem"><a class="navItem" href="/docs/overview/background">The Spotify Story</a></li><li class="navListItem"><a class="navItem" href="/docs/overview/adopting">Strategies for adopting</a></li><li class="navListItem"><a class="navItem" href="/docs/overview/versioning-policy">Release &amp; Versioning Policy</a></li><li class="navListItem"><a class="navItem" href="/docs/overview/support">Support and community</a></li><li class="navListItem"><a class="navItem" href="/docs/overview/glossary">Backstage Glossary</a></li><li class="navListItem"><a class="navItem" href="/docs/overview/logos">Logo assets</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Getting Started<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/getting-started/">Getting Started</a></li><li class="navListItem"><a class="navItem" href="/docs/getting-started/configuration">Getting Started, configuring Backstage</a></li><li class="navListItem"><a class="navItem" href="/docs/getting-started/create-an-app">Create an App</a></li><li class="navListItem"><a class="navItem" href="/docs/getting-started/running-backstage-locally">Running Backstage Locally</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">App configuration</h4><ul><li class="navListItem"><a class="navItem" href="/docs/getting-started/configure-app-with-plugins">Configuring App with plugins</a></li><li class="navListItem"><a class="navItem" href="/docs/getting-started/app-custom-theme">Customize the look-and-feel of your App</a></li><li class="navListItem"><a class="navItem" href="/docs/getting-started/homepage">Backstage homepage - Setup and Customization</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/getting-started/keeping-backstage-updated">Keeping Backstage Updated</a></li><li class="navListItem"><a class="navItem" href="/docs/getting-started/concepts">Key Concepts</a></li><li class="navListItem"><a class="navItem" href="/docs/getting-started/contributors">Contributors</a></li><li class="navListItem"><a class="navItem" href="/docs/getting-started/project-structure">Backstage Project Structure</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Local Development<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">CLI</h4><ul><li class="navListItem"><a class="navItem" href="/docs/local-dev/cli-overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/local-dev/cli-build-system">Build System</a></li><li class="navListItem"><a class="navItem" href="/docs/local-dev/cli-commands">Commands</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/local-dev/linking-local-packages">Linking in Local Packages</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Core Features<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Software Catalog</h4><ul><li class="navListItem"><a class="navItem" href="/docs/features/software-catalog/software-catalog-overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-catalog/life-of-an-entity">The Life of an Entity</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-catalog/configuration">Catalog Configuration</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-catalog/system-model">System Model</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-catalog/descriptor-format">YAML File Format</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-catalog/references">Entity References</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-catalog/well-known-annotations">Well-known Annotations</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-catalog/well-known-relations">Well-known Relations</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-catalog/well-known-statuses">Well-known Statuses</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-catalog/extending-the-model">Extending the model</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-catalog/external-integrations">External integrations</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-catalog/catalog-customization">Catalog Customization</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-catalog/software-catalog-api">API</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Kubernetes</h4><ul><li class="navListItem"><a class="navItem" href="/docs/features/kubernetes/overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/features/kubernetes/installation">Installation</a></li><li class="navListItem"><a class="navItem" href="/docs/features/kubernetes/configuration">Configuration</a></li><li class="navListItem"><a class="navItem" href="/docs/features/kubernetes/troubleshooting">Troubleshooting</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Software Templates</h4><ul><li class="navListItem"><a class="navItem" href="/docs/features/software-templates/software-templates-index">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-templates/configuration">Configuration</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-templates/adding-templates">Adding your own Templates</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-templates/writing-templates">Writing Templates</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-templates/builtin-actions">Builtin actions</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-templates/writing-custom-actions">Writing Custom Actions</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-templates/writing-custom-field-extensions">Writing Custom Field Extensions</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-templates/migrating-from-v1beta2-to-v1beta3">Migrating to v1beta3 templates</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Backstage Search</h4><ul><li class="navListItem"><a class="navItem" href="/docs/features/search/search-overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/features/search/getting-started">Getting Started with Search</a></li><li class="navListItem"><a class="navItem" href="/docs/features/search/concepts">Search Concepts</a></li><li class="navListItem"><a class="navItem" href="/docs/features/search/architecture">Search Architecture</a></li><li class="navListItem"><a class="navItem" href="/docs/features/search/search-engines">Search Engines</a></li><li class="navListItem"><a class="navItem" href="/docs/features/search/how-to-guides">&quot;HOW TO&quot; guides</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">TechDocs</h4><ul><li class="navListItem"><a class="navItem" href="/docs/features/techdocs/techdocs-overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/features/techdocs/getting-started">Getting Started</a></li><li class="navListItem"><a class="navItem" href="/docs/features/techdocs/concepts">Concepts</a></li><li class="navListItem"><a class="navItem" href="/docs/features/techdocs/architecture">TechDocs Architecture</a></li><li class="navListItem"><a class="navItem" href="/docs/features/techdocs/creating-and-publishing">Creating and Publishing Documentation</a></li><li class="navListItem"><a class="navItem" href="/docs/features/techdocs/configuration">TechDocs Configuration Options</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/features/techdocs/using-cloud-storage">Using Cloud Storage for TechDocs generated files</a></li><li class="navListItem"><a class="navItem" href="/docs/features/techdocs/configuring-ci-cd">Configuring CI/CD to generate and publish TechDocs sites</a></li><li class="navListItem"><a class="navItem" href="/docs/features/techdocs/cli">TechDocs CLI</a></li><li class="navListItem"><a class="navItem" href="/docs/features/techdocs/how-to-guides">&quot;HOW TO&quot; guides</a></li><li class="navListItem"><a class="navItem" href="/docs/features/techdocs/troubleshooting">Troubleshooting</a></li><li class="navListItem"><a class="navItem" href="/docs/features/techdocs/faqs">FAQ</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Integrations<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/integrations/">Overview</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">AWS S3</h4><ul><li class="navListItem"><a class="navItem" href="/docs/integrations/aws-s3/locations">Locations</a></li><li class="navListItem"><a class="navItem" href="/docs/integrations/aws-s3/discovery">Discovery</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Azure</h4><ul><li class="navListItem"><a class="navItem" href="/docs/integrations/azure/locations">Locations</a></li><li class="navListItem"><a class="navItem" href="/docs/integrations/azure/discovery">Discovery</a></li><li class="navListItem"><a class="navItem" href="/docs/integrations/azure/org">Org Data</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Bitbucket</h4><ul><li class="navListItem"><a class="navItem" href="/docs/integrations/bitbucket/locations">Locations</a></li><li class="navListItem"><a class="navItem" href="/docs/integrations/bitbucket/discovery">Discovery</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Datadog</h4><ul><li class="navListItem"><a class="navItem" href="/docs/integrations/datadog-rum/installation">Installation</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">GitHub</h4><ul><li class="navListItem"><a class="navItem" href="/docs/integrations/github/locations">Locations</a></li><li class="navListItem"><a class="navItem" href="/docs/integrations/github/discovery">Discovery</a></li><li class="navListItem"><a class="navItem" href="/docs/integrations/github/org">Org Data</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">GitLab</h4><ul><li class="navListItem"><a class="navItem" href="/docs/integrations/gitlab/locations">Locations</a></li><li class="navListItem"><a class="navItem" href="/docs/integrations/gitlab/discovery">Discovery</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Google GCS</h4><ul><li class="navListItem"><a class="navItem" href="/docs/integrations/google-cloud-storage/locations">Locations</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">LDAP</h4><ul><li class="navListItem"><a class="navItem" href="/docs/integrations/ldap/org">Org Data</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Plugins<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/plugins/">Intro to plugins</a></li><li class="navListItem"><a class="navItem" href="/docs/plugins/existing-plugins">Existing plugins</a></li><li class="navListItem"><a class="navItem" href="/docs/plugins/create-a-plugin">Create a Backstage Plugin</a></li><li class="navListItem"><a class="navItem" href="/docs/plugins/plugin-development">Plugin Development</a></li><li class="navListItem"><a class="navItem" href="/docs/plugins/structure-of-a-plugin">Structure of a Plugin</a></li><li class="navListItem"><a class="navItem" href="/docs/plugins/integrating-plugin-into-software-catalog">Integrate into the Software Catalog</a></li><li class="navListItem"><a class="navItem" href="/docs/plugins/composability">Composability System</a></li><li class="navListItem"><a class="navItem" href="/docs/plugins/analytics">Plugin Analytics</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Backends and APIs</h4><ul><li class="navListItem"><a class="navItem" href="/docs/plugins/proxying">Proxying</a></li><li class="navListItem"><a class="navItem" href="/docs/plugins/backend-plugin">Backend plugins</a></li><li class="navListItem"><a class="navItem" href="/docs/plugins/call-existing-api">Call Existing API</a></li><li class="navListItem"><a class="navItem" href="/docs/plugins/github-apps">GitHub Apps for Backend Authentication</a></li><li class="navListItem"><a class="navItem" href="/docs/plugins/url-reader">URL Reader</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Testing</h4><ul><li class="navListItem"><a class="navItem" href="/docs/plugins/testing">Testing with Jest</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Publishing</h4><ul><li class="navListItem"><a class="navItem" href="/docs/plugins/publish-private">Publish private</a></li><li class="navListItem"><a class="navItem" href="/docs/plugins/add-to-marketplace">Add to Marketplace</a></li><li class="navListItem"><a class="navItem" href="/docs/plugins/observability">Observability</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Configuration<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/conf/">Static Configuration in Backstage</a></li><li class="navListItem"><a class="navItem" href="/docs/conf/reading">Reading Backstage Configuration</a></li><li class="navListItem"><a class="navItem" href="/docs/conf/writing">Writing Backstage Configuration Files</a></li><li class="navListItem"><a class="navItem" href="/docs/conf/defining">Defining Configuration for your Plugin</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Auth and identity<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/auth/">Adding Authentication</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Included providers</h4><ul><li class="navListItem"><a class="navItem" href="/docs/auth/auth0/provider">Auth0</a></li><li class="navListItem"><a class="navItem" href="/docs/auth/atlassian/provider">Atlassian</a></li><li class="navListItem"><a class="navItem" href="/docs/auth/bitbucket/provider">Bitbucket</a></li><li class="navListItem"><a class="navItem" href="/docs/auth/microsoft/provider">Azure</a></li><li class="navListItem"><a class="navItem" href="/docs/auth/github/provider">GitHub</a></li><li class="navListItem"><a class="navItem" href="/docs/auth/gitlab/provider">GitLab</a></li><li class="navListItem"><a class="navItem" href="/docs/auth/google/provider">Google</a></li><li class="navListItem"><a class="navItem" href="/docs/auth/okta/provider">Okta</a></li><li class="navListItem"><a class="navItem" href="/docs/auth/onelogin/provider">OneLogin</a></li><li class="navListItem"><a class="navItem" href="/docs/auth/oauth2-proxy/provider">OAuth 2 Custom Proxy</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/auth/add-auth-provider">Adding authentication providers</a></li><li class="navListItem"><a class="navItem" href="/docs/auth/using-auth">Using authentication and identity</a></li><li class="navListItem"><a class="navItem" href="/docs/auth/identity-resolver">Identity resolver</a></li><li class="navListItem"><a class="navItem" href="/docs/auth/auth-backend">Auth backend</a></li><li class="navListItem"><a class="navItem" href="/docs/auth/oauth">OAuth and OpenID Connect</a></li><li class="navListItem"><a class="navItem" href="/docs/auth/auth-backend-classes">Auth backend classes</a></li><li class="navListItem"><a class="navItem" href="/docs/auth/glossary">Glossary</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Deployment<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/deployment/">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/deployment/docker">Docker</a></li><li class="navListItem"><a class="navItem" href="/docs/deployment/k8s">Kubernetes</a></li><li class="navListItem"><a class="navItem" href="/docs/deployment/helm">Helm</a></li><li class="navListItem"><a class="navItem" href="/docs/deployment/heroku">Heroku</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Designing for Backstage<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/dls/design">Design</a></li><li class="navListItem"><a class="navItem" href="/docs/dls/contributing-to-storybook">Contributing to Storybook</a></li><li class="navListItem"><a class="navItem" href="/docs/dls/figma">Figma</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">API Reference<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Guides</h4><ul><li class="navListItem"><a class="navItem" href="/docs/api/utility-apis">Utility APIs</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">API Reference</h4><ul><li class="navListItem"><a class="navItem" href="/docs/reference/">Package Index</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/api/deprecations">Deprecations</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Tutorials<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/tutorials/journey">Future developer journey</a></li><li class="navListItem"><a class="navItem" href="/docs/tutorials/quickstart-app-plugin">Adding Custom Plugin to Existing Monorepo App</a></li><li class="navListItem"><a class="navItem" href="/docs/tutorials/package-role-migration">Package Role Migration</a></li><li class="navListItem"><a class="navItem" href="/docs/tutorials/migrating-away-from-core">Migrating away from @backstage/core</a></li><li class="navListItem"><a class="navItem" href="/docs/tutorials/configuring-plugin-databases">Configuring Plugin Databases</a></li><li class="navListItem"><a class="navItem" href="/docs/tutorials/switching-sqlite-postgres">Switching Backstage from SQLite to PostgreSQL</a></li><li class="navListItem"><a class="navItem" href="/docs/tutorials/using-backstage-proxy-within-plugin">Using the Backstage Proxy from Within a Plugin</a></li><li class="navListItem"><a class="navItem" href="/docs/tutorials/backend-to-backend-auth">Backend-to-Backend Authentication</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Architecture Decision Records (ADRs)<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/architecture-decisions/adrs-overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/architecture-decisions/adrs-adr001">&#x27;ADR001: Architecture Decision Record (ADR) log&#x27;</a></li><li class="navListItem"><a class="navItem" href="/docs/architecture-decisions/adrs-adr002">&#x27;ADR002: Default Software Catalog File Format&#x27;</a></li><li class="navListItem"><a class="navItem" href="/docs/architecture-decisions/adrs-adr003">&#x27;ADR003: Avoid Default Exports and Prefer Named Exports&#x27;</a></li><li class="navListItem"><a class="navItem" href="/docs/architecture-decisions/adrs-adr004">&#x27;ADR004: Module Export Structure&#x27;</a></li><li class="navListItem"><a class="navItem" href="/docs/architecture-decisions/adrs-adr005">&#x27;ADR005: Catalog Core Entities&#x27;</a></li><li class="navListItem"><a class="navItem" href="/docs/architecture-decisions/adrs-adr006">&#x27;ADR006: Avoid React.FC and React.SFC&#x27;</a></li><li class="navListItem"><a class="navItem" href="/docs/architecture-decisions/adrs-adr007">&#x27;ADR007: Use MSW to mock http requests&#x27;</a></li><li class="navListItem"><a class="navItem" href="/docs/architecture-decisions/adrs-adr008">&#x27;ADR008: Default Catalog File Name&#x27;</a></li><li class="navListItem"><a class="navItem" href="/docs/architecture-decisions/adrs-adr009">&#x27;ADR009: Entity References&#x27;</a></li><li class="navListItem"><a class="navItem" href="/docs/architecture-decisions/adrs-adr010">&#x27;ADR010: Use the Luxon Date Library&#x27;</a></li><li class="navListItem"><a class="navItem" href="/docs/architecture-decisions/adrs-adr011">&#x27;ADR011: Plugin Package Structure&#x27;</a></li><li class="navListItem"><a class="navItem" href="/docs/architecture-decisions/adrs-adr012">&#x27;ADR012: Use Luxon.toLocaleString and date/time presets&#x27;</a></li><li class="navListItem"><a class="navItem" href="/docs/architecture-decisions/adrs-adr013">&#x27;ADR013: Proper use of HTTP fetching libraries&#x27;</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">FAQ<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/FAQ">FAQ</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/backstage/backstage/edit/master/docs/features/techdocs/using-cloud-storage.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">Using Cloud Storage for TechDocs generated files</h1></header><article><div><span><p>In the <a href="/docs/features/techdocs/architecture">TechDocs architecture</a> you have the option to choose
where you want to store the Generated static files which TechDocs uses to render
documentation. In both the &quot;Basic&quot; and &quot;Recommended&quot; setup, you can add cloud
storage providers like Google GCS, Amazon AWS S3, etc. By default, TechDocs uses
the local filesystem of the <code>techdocs-backend</code> plugin in the &quot;Basic&quot; setup. And
in the recommended setup, having one of the cloud storage is a prerequisite.
Read more on the TechDocs Architecture documentation page.</p>
<p>On this page you can read how to enable them.</p>
<h2><a class="anchor" aria-hidden="true" id="configuring-google-gcs-bucket-with-techdocs"></a><a href="#configuring-google-gcs-bucket-with-techdocs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Configuring Google GCS Bucket with TechDocs</h2>
<p>Follow the
<a href="https://googleapis.dev/nodejs/storage/latest/index.html#quickstart">official Google Cloud documentation</a>
for the latest instructions on the following steps involving GCP.</p>
<p><strong>1. Set <code>techdocs.publisher.type</code> config in your <code>app-config.yaml</code></strong></p>
<p>Set <code>techdocs.publisher.type</code> to <code>'googleGcs'</code>.</p>
<pre><code class="hljs css language-yaml"><span class="hljs-attr">techdocs:</span>
  <span class="hljs-attr">publisher:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">'googleGcs'</span>
</code></pre>
<p><strong>2. Create a GCS Bucket</strong></p>
<p>Create a dedicated Google Cloud Storage bucket for TechDocs sites.
techdocs-backend will publish documentation to this bucket. TechDocs will fetch
files from here to serve documentation in Backstage. Note that the bucket names
are globally unique.</p>
<p>Set the config <code>techdocs.publisher.googleGcs.bucketName</code> in your
<code>app-config.yaml</code> to the name of the bucket you just created.</p>
<pre><code class="hljs css language-yaml"><span class="hljs-attr">techdocs:</span>
  <span class="hljs-attr">publisher:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">'googleGcs'</span>
    <span class="hljs-attr">googleGcs:</span>
      <span class="hljs-attr">bucketName:</span> <span class="hljs-string">'name-of-techdocs-storage-bucket'</span>
</code></pre>
<p><strong>3a. (Recommended) Authentication using environment variable</strong></p>
<p>The GCS Node.js client will automatically use the environment variable
<code>GOOGLE_APPLICATION_CREDENTIALS</code> to authenticate with Google Cloud. It might
already be set in Compute Engine, Google Kubernetes Engine, etc. Read
<a href="https://cloud.google.com/docs/authentication/production">https://cloud.google.com/docs/authentication/production</a> for more details.</p>
<p><strong>3b. Authentication using app-config.yaml</strong></p>
<p>If you do not prefer (3a) and optionally like to use a service account, you can
follow these steps.</p>
<p>Create a new Service Account and a key associated with it. In roles of the
service account, use &quot;Storage Object Admin&quot;.</p>
<p>If you want to create a custom role, make sure to include both <code>get</code> and
<code>create</code> permissions for both &quot;Objects&quot; and &quot;Buckets&quot;. See
<a href="https://cloud.google.com/storage/docs/access-control/iam-permissions">https://cloud.google.com/storage/docs/access-control/iam-permissions</a></p>
<p>A service account can have many keys. Open your newly created account's page (in
IAM &amp; Admin console), and create a new key. Use JSON format for the key.</p>
<p>A <code>&lt;GCP-PROJECT-ID-random-uid&gt;.json</code> file will be downloaded. This is the secret
key TechDocs will use to make API calls. Make it available in your Backstage
server and/or your local development server and set it in the app config
<code>techdocs.publisher.googleGcs.credentials</code>.</p>
<pre><code class="hljs css language-yaml"><span class="hljs-attr">techdocs:</span>
  <span class="hljs-attr">publisher:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">'googleGcs'</span>
    <span class="hljs-attr">googleGcs:</span>
      <span class="hljs-attr">bucketName:</span> <span class="hljs-string">'name-of-techdocs-storage-bucket'</span>
      <span class="hljs-attr">credentials:</span>
        <span class="hljs-string">$file:</span> <span class="hljs-string">'/path/to/google_application_credentials.json'</span>
</code></pre>
<p>Note: If you are finding it difficult to make the file
<code>google_application_credentials.json</code> available on a server, you could use the
file's content and set as an environment variable. And then use</p>
<pre><code class="hljs css language-yaml"><span class="hljs-attr">techdocs:</span>
  <span class="hljs-attr">publisher:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">'googleGcs'</span>
    <span class="hljs-attr">googleGcs:</span>
      <span class="hljs-attr">bucketName:</span> <span class="hljs-string">'name-of-techdocs-storage-bucket'</span>
      <span class="hljs-attr">credentials:</span> <span class="hljs-string">${GOOGLE_APPLICATION_CREDENTIALS}</span>
</code></pre>
<p><strong>4. That's it!</strong></p>
<p>Your Backstage app is now ready to use Google Cloud Storage for TechDocs, to
store and read the static generated documentation files.</p>
<h2><a class="anchor" aria-hidden="true" id="configuring-aws-s3-bucket-with-techdocs"></a><a href="#configuring-aws-s3-bucket-with-techdocs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Configuring AWS S3 Bucket with TechDocs</h2>
<p><strong>1. Set <code>techdocs.publisher.type</code> config in your <code>app-config.yaml</code></strong></p>
<p>Set <code>techdocs.publisher.type</code> to <code>'awsS3'</code>.</p>
<pre><code class="hljs css language-yaml"><span class="hljs-attr">techdocs:</span>
  <span class="hljs-attr">publisher:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">'awsS3'</span>
</code></pre>
<p><strong>2. Create an S3 Bucket</strong></p>
<p>Create a dedicated AWS S3 bucket for the storage of TechDocs sites.
<a href="https://docs.aws.amazon.com/AmazonS3/latest/user-guide/create-bucket.html">Refer to the official documentation</a>.
<a href="https://github.com/backstage/backstage/blob/master/contrib/terraform/techdocs-s3-storage/terraform.tf">Terraform example</a>.</p>
<p>TechDocs will publish documentation to this bucket and will fetch files from
here to serve documentation in Backstage. Note that the bucket names are
globally unique.</p>
<p>Set the config <code>techdocs.publisher.awsS3.bucketName</code> in your <code>app-config.yaml</code>
to the name of the bucket you just created.</p>
<pre><code class="hljs css language-yaml"><span class="hljs-attr">techdocs:</span>
  <span class="hljs-attr">publisher:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">'awsS3'</span>
    <span class="hljs-attr">awsS3:</span>
      <span class="hljs-attr">bucketName:</span> <span class="hljs-string">'name-of-techdocs-storage-bucket'</span>
</code></pre>
<p><strong>3. Create minimal AWS IAM policies to manage TechDocs</strong></p>
<p>To <em>write</em> TechDocs into the S3 bucket the IAM policy needs to have at a minimum
permissions to:</p>
<ul>
<li><code>s3:ListBucket</code> to retrieve bucket metadata</li>
<li><code>s3:PutObject</code> to upload files to the bucket</li>
<li><code>s3:DeleteObject</code> and <code>s3:DeleteObjectVersion</code> to delete stale content during
re-publishing</li>
</ul>
<p>To <em>read</em> TechDocs from the S3 bucket the IAM policy needs to have at a minimum
permissions to:</p>
<ul>
<li><code>s3:ListBucket</code> - To retrieve bucket metadata</li>
<li><code>s3:GetObject</code> - To retrieve files from the bucket</li>
</ul>
<blockquote>
<p>Note: If you need to migrate documentation objects from an older-style path
format including case-sensitive entity metadata, you will need to add some
additional permissions to be able to perform the migration, including:</p>
<ul>
<li><code>s3:PutBucketAcl</code> (for copying files,
<a href="https://docs.aws.amazon.com/AmazonS3/latest/API/API_PutObjectAcl.html">more info here</a>)</li>
<li><code>s3:DeleteObject</code> and <code>s3:DeleteObjectVersion</code> (for deleting migrated files,
<a href="https://docs.aws.amazon.com/AmazonS3/latest/API/API_DeleteObject.html">more info here</a>)</li>
</ul>
<p>...And you will need to ensure the permissions apply to the bucket itself, as
well as all resources under the bucket. See the example policy below.</p>
</blockquote>
<pre><code class="hljs css language-json">{
  <span class="hljs-attr">"Version"</span>: <span class="hljs-string">"2012-10-17"</span>,
  <span class="hljs-attr">"Statement"</span>: [
    {
      <span class="hljs-attr">"Sid"</span>: <span class="hljs-string">"TechDocsWithMigration"</span>,
      <span class="hljs-attr">"Effect"</span>: <span class="hljs-string">"Allow"</span>,
      <span class="hljs-attr">"Action"</span>: [
        <span class="hljs-string">"s3:PutObject"</span>,
        <span class="hljs-string">"s3:GetObject"</span>,
        <span class="hljs-string">"s3:DeleteObjectVersion"</span>,
        <span class="hljs-string">"s3:ListBucket"</span>,
        <span class="hljs-string">"s3:DeleteObject"</span>,
        <span class="hljs-string">"s3:PutObjectAcl"</span>
      ],
      <span class="hljs-attr">"Resource"</span>: [<span class="hljs-string">"arn:aws:s3:::your-bucket"</span>, <span class="hljs-string">"arn:aws:s3:::your-bucket/*"</span>]
    }
  ]
}
</code></pre>
<p><strong>4a. (Recommended) Setup authentication the AWS way, using environment
variables</strong></p>
<p>You should follow the
<a href="https://docs.aws.amazon.com/general/latest/gr/aws-access-keys-best-practices.html">AWS security best practices guide for authentication</a>.</p>
<p>TechDocs needs access to read files and metadata of the S3 bucket. So if you are
creating a policy for a user you want to make sure it is granted access to
ListBucket, GetObject and PutObject.</p>
<p>If the environment variables</p>
<ul>
<li><code>AWS_ACCESS_KEY_ID</code></li>
<li><code>AWS_SECRET_ACCESS_KEY</code></li>
<li><code>AWS_REGION</code></li>
</ul>
<p>are set and can be used to access the bucket you created in step 2, they will be
used by the AWS SDK V2 Node.js client for authentication.
<a href="https://docs.aws.amazon.com/sdk-for-javascript/v2/developer-guide/loading-node-credentials-environment.html">Refer to the official documentation for loading credentials in Node.js from environment variables</a>.</p>
<p>If the environment variables are missing, the AWS SDK tries to read the
<code>~/.aws/credentials</code> file for credentials.
<a href="https://docs.aws.amazon.com/sdk-for-javascript/v2/developer-guide/loading-node-credentials-shared.html">Refer to the official documentation.</a></p>
<p>If you are using Amazon EC2 instance to deploy Backstage, you do not need to
obtain the access keys separately. They can be made available in the environment
automatically by defining appropriate IAM role with access to the bucket. Read
more in
<a href="https://docs.aws.amazon.com/general/latest/gr/aws-access-keys-best-practices.html#use-roles">official AWS documentation for using IAM roles.</a>.</p>
<p>The AWS Region of the bucket is optional since TechDocs uses AWS SDK V2 and not
V3.</p>
<p><strong>4b. Authentication using app-config.yaml</strong></p>
<p>AWS credentials and region can be provided to the AWS SDK via <code>app-config.yaml</code>.
If the configs below are present, they will be used over existing <code>AWS_*</code>
environment variables and the <code>~/.aws/credentials</code> config file.</p>
<pre><code class="hljs css language-yaml"><span class="hljs-attr">techdocs:</span>
  <span class="hljs-attr">publisher:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">'awsS3'</span>
    <span class="hljs-attr">awsS3:</span>
      <span class="hljs-attr">bucketName:</span> <span class="hljs-string">'name-of-techdocs-storage-bucket'</span>
      <span class="hljs-attr">region:</span> <span class="hljs-string">${AWS_REGION}</span>
      <span class="hljs-attr">credentials:</span>
        <span class="hljs-attr">accessKeyId:</span> <span class="hljs-string">${AWS_ACCESS_KEY_ID}</span>
        <span class="hljs-attr">secretAccessKey:</span> <span class="hljs-string">${AWS_SECRET_ACCESS_KEY}</span>
</code></pre>
<p>Refer to the
<a href="https://docs.aws.amazon.com/sdk-for-javascript/v2/developer-guide/getting-your-credentials.html">official AWS documentation for obtaining the credentials</a>.</p>
<p><strong>4c. Authentication using an assumed role</strong> Users with multiple AWS accounts
may want to use a role for S3 storage that is in a different AWS account. Using
the <code>roleArn</code> parameter as seen below, you can instruct the TechDocs publisher
to assume a role before accessing S3.</p>
<pre><code class="hljs css language-yaml"><span class="hljs-attr">techdocs:</span>
  <span class="hljs-attr">publisher:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">'awsS3'</span>
    <span class="hljs-attr">awsS3:</span>
      <span class="hljs-attr">bucketName:</span> <span class="hljs-string">'name-of-techdocs-storage-bucket'</span>
      <span class="hljs-attr">region:</span> <span class="hljs-string">${AWS_REGION}</span>
      <span class="hljs-attr">credentials:</span>
        <span class="hljs-attr">roleArn:</span> <span class="hljs-string">arn:aws:iam::123456789012:role/my-backstage-role</span>
</code></pre>
<p>Note: Assuming a role requires that primary credentials are already configured
at <code>AWS.config.credentials</code>. Read more about
<a href="https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRole.html">assuming roles in AWS</a>.</p>
<p><strong>5. That's it!</strong></p>
<p>Your Backstage app is now ready to use AWS S3 for TechDocs, to store and read
the static generated documentation files. When you start the backend of the app,
you should be able to see
<code>techdocs info Successfully connected to the AWS S3 bucket</code> in the logs.</p>
<h2><a class="anchor" aria-hidden="true" id="configuring-azure-blob-storage-container-with-techdocs"></a><a href="#configuring-azure-blob-storage-container-with-techdocs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Configuring Azure Blob Storage Container with TechDocs</h2>
<p>Follow the
<a href="https://docs.microsoft.com/en-us/azure/storage/common/storage-auth?toc=/azure/storage/blobs/toc.json">official Azure Blob Storage documentation</a>
for the latest instructions on the following steps involving Azure Blob Storage.</p>
<p><strong>1. Set <code>techdocs.publisher.type</code> config in your <code>app-config.yaml</code></strong></p>
<p>Set <code>techdocs.publisher.type</code> to <code>'azureBlobStorage'</code>.</p>
<pre><code class="hljs css language-yaml"><span class="hljs-attr">techdocs:</span>
  <span class="hljs-attr">publisher:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">'azureBlobStorage'</span>
</code></pre>
<p><strong>2. Create an Azure Blob Storage Container</strong></p>
<p>Create a dedicated container for TechDocs sites.
<a href="https://docs.microsoft.com/en-us/azure/storage/blobs/storage-quickstart-blobs-portal">Refer to the official documentation</a>.</p>
<p>TechDocs will publish documentation to this container and will fetch files from
here to serve documentation in Backstage. Note that the container names are
globally unique.</p>
<p>Set the config <code>techdocs.publisher.azureBlobStorage.containerName</code> in your
<code>app-config.yaml</code> to the name of the container you just created.</p>
<pre><code class="hljs css language-yaml"><span class="hljs-attr">techdocs:</span>
  <span class="hljs-attr">publisher:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">'azureBlobStorage'</span>
    <span class="hljs-attr">azureBlobStorage:</span>
      <span class="hljs-attr">containerName:</span> <span class="hljs-string">'name-of-techdocs-storage-container'</span>
</code></pre>
<p><strong>3a. (Recommended) Authentication using environment variable</strong></p>
<p>If you do not prefer (3a) and optionally like to use a service account, you can
set the config <code>techdocs.publisher.azureBlobStorage.credentials.accountName</code> in
your <code>app-config.yaml</code> to the your account name.</p>
<p>The storage blob client will automatically use the environment variable
<code>AZURE_TENANT_ID</code>, <code>AZURE_CLIENT_ID</code>, <code>AZURE_CLIENT_SECRET</code> to authenticate with
Azure Blob Storage.
<a href="https://docs.microsoft.com/en-us/azure/active-directory/develop/howto-create-service-principal-portal">Steps to create the service where the variables can be retrieved from</a>.</p>
<p><a href="https://docs.microsoft.com/en-us/azure/storage/common/storage-auth-aad">https://docs.microsoft.com/en-us/azure/storage/common/storage-auth-aad</a> for more
details.</p>
<pre><code class="hljs css language-yaml"><span class="hljs-attr">techdocs:</span>
  <span class="hljs-attr">publisher:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">'azureBlobStorage'</span>
    <span class="hljs-attr">azureBlobStorage:</span>
      <span class="hljs-attr">containerName:</span> <span class="hljs-string">'name-of-techdocs-storage-bucket'</span>
      <span class="hljs-attr">credentials:</span>
        <span class="hljs-attr">accountName:</span> <span class="hljs-string">${TECHDOCS_AZURE_BLOB_STORAGE_ACCOUNT_NAME}</span>
</code></pre>
<p><strong>3b. Authentication using app-config.yaml</strong></p>
<p>If you do not prefer (3a) and optionally like to use a service account, you can
follow these steps.</p>
<p>To get credentials, access the Azure Portal and go to &quot;Settings &gt; Access Keys&quot;,
and get your Storage account name and Primary Key.
<a href="https://docs.microsoft.com/en-us/rest/api/storageservices/authorize-with-shared-key">https://docs.microsoft.com/en-us/rest/api/storageservices/authorize-with-shared-key</a>
for more details.</p>
<pre><code class="hljs css language-yaml"><span class="hljs-attr">techdocs:</span>
  <span class="hljs-attr">publisher:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">'azureBlobStorage'</span>
    <span class="hljs-attr">azureBlobStorage:</span>
      <span class="hljs-attr">containerName:</span> <span class="hljs-string">'name-of-techdocs-storage-bucket'</span>
      <span class="hljs-attr">credentials:</span>
        <span class="hljs-attr">accountName:</span> <span class="hljs-string">${TECHDOCS_AZURE_BLOB_STORAGE_ACCOUNT_NAME}</span>
        <span class="hljs-attr">accountKey:</span> <span class="hljs-string">${TECHDOCS_AZURE_BLOB_STORAGE_ACCOUNT_KEY}</span>
</code></pre>
<p>In either case, the account or credentials used to access your container and all
TechDocs objects underneath it should have the <code>Storage Blog Data Owner</code> role
applied, in order to read, write, and delete objects as needed.</p>
<p><strong>4. That's it!</strong></p>
<p>Your Backstage app is now ready to use Azure Blob Storage for TechDocs, to store
and read the static generated documentation files. When you start the backend of
the app, you should be able to see
<code>techdocs info Successfully connected to the Azure Blob Storage container</code> in
the logs.</p>
<h2><a class="anchor" aria-hidden="true" id="configuring-openstack-swift-container-with-techdocs"></a><a href="#configuring-openstack-swift-container-with-techdocs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Configuring OpenStack Swift Container with TechDocs</h2>
<p>Follow the
<a href="https://docs.openstack.org/api-ref/identity/v3/">official OpenStack Api documentation</a>
for the latest instructions on the following steps involving OpenStack Storage.</p>
<p><strong>1. Set <code>techdocs.publisher.type</code> config in your <code>app-config.yaml</code></strong></p>
<p>Set <code>techdocs.publisher.type</code> to <code>'openStackSwift'</code>.</p>
<pre><code class="hljs css language-yaml"><span class="hljs-attr">techdocs:</span>
  <span class="hljs-attr">publisher:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">'openStackSwift'</span>
</code></pre>
<p><strong>2. Create an OpenStack Swift Storage Container</strong></p>
<p>Create a dedicated container for TechDocs sites.
<a href="https://docs.openstack.org/mitaka/user-guide/dashboard_manage_containers.html">Refer to the official documentation</a>.</p>
<p>TechDocs will publish documentation to this container and will fetch files from
here to serve documentation in Backstage. Note that the container names are
globally unique.</p>
<p>Set the config <code>techdocs.publisher.openStackSwift.containerName</code> in your
<code>app-config.yaml</code> to the name of the container you just created.</p>
<pre><code class="hljs css language-yaml"><span class="hljs-attr">techdocs:</span>
  <span class="hljs-attr">publisher:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">'openStackSwift'</span>
    <span class="hljs-attr">openStackSwift:</span>
      <span class="hljs-attr">containerName:</span> <span class="hljs-string">'name-of-techdocs-storage-container'</span>
</code></pre>
<p><strong>3. Authentication using app-config.yaml</strong></p>
<p>Set the configs in your <code>app-config.yaml</code> to point to your container name.</p>
<p><a href="https://docs.openstack.org/api-ref/identity/v3/?expanded=password-authentication-with-unscoped-authorization-detail,authenticating-with-an-application-credential-detail#authenticating-with-an-application-credential">https://docs.openstack.org/api-ref/identity/v3/?expanded=password-authentication-with-unscoped-authorization-detail,authenticating-with-an-application-credential-detail#authenticating-with-an-application-credential</a>
for more details.</p>
<pre><code class="hljs css language-yaml"><span class="hljs-attr">techdocs:</span>
  <span class="hljs-attr">publisher:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">'openStackSwift'</span>
    <span class="hljs-attr">openStackSwift:</span>
      <span class="hljs-attr">containerName:</span> <span class="hljs-string">'name-of-techdocs-storage-bucket'</span>
      <span class="hljs-attr">credentials:</span>
        <span class="hljs-attr">id:</span> <span class="hljs-string">${OPENSTACK_SWIFT_STORAGE_APPLICATION_CREDENTIALS_ID}</span>
        <span class="hljs-attr">secret:</span> <span class="hljs-string">${OPENSTACK_SWIFT_STORAGE_APPLICATION_CREDENTIALS_SECRET}</span>
      <span class="hljs-attr">authUrl:</span> <span class="hljs-string">${OPENSTACK_SWIFT_STORAGE_AUTH_URL}</span>
      <span class="hljs-attr">swiftUrl:</span> <span class="hljs-string">${OPENSTACK_SWIFT_STORAGE_SWIFT_URL}</span>
</code></pre>
<p><strong>4. That's it!</strong></p>
<p>Your Backstage app is now ready to use OpenStack Swift Storage for TechDocs, to
store and read the static generated documentation files. When you start the
backend of the app, you should be able to see
<code>techdocs info Successfully connected to the OpenStack Swift Storage container</code>
in the logs.</p>
<h2><a class="anchor" aria-hidden="true" id="bonus-migration-from-old-openstack-swift-configuration"></a><a href="#bonus-migration-from-old-openstack-swift-configuration" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Bonus: Migration from old OpenStack Swift Configuration</h2>
<p>Let's assume we have the old OpenStack Swift configuration here.</p>
<pre><code class="hljs css language-yaml"><span class="hljs-attr">techdocs:</span>
  <span class="hljs-attr">publisher:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">'openStackSwift'</span>
    <span class="hljs-attr">openStackSwift:</span>
      <span class="hljs-attr">containerName:</span> <span class="hljs-string">'name-of-techdocs-storage-bucket'</span>
      <span class="hljs-attr">credentials:</span>
        <span class="hljs-attr">username:</span> <span class="hljs-string">${OPENSTACK_SWIFT_STORAGE_USERNAME}</span>
        <span class="hljs-attr">password:</span> <span class="hljs-string">${OPENSTACK_SWIFT_STORAGE_PASSWORD}</span>
      <span class="hljs-attr">authUrl:</span> <span class="hljs-string">${OPENSTACK_SWIFT_STORAGE_AUTH_URL}</span>
      <span class="hljs-attr">keystoneAuthVersion:</span> <span class="hljs-string">${OPENSTACK_SWIFT_STORAGE_AUTH_VERSION}</span>
      <span class="hljs-attr">domainId:</span> <span class="hljs-string">${OPENSTACK_SWIFT_STORAGE_DOMAIN_ID}</span>
      <span class="hljs-attr">domainName:</span> <span class="hljs-string">${OPENSTACK_SWIFT_STORAGE_DOMAIN_NAME}</span>
      <span class="hljs-attr">region:</span> <span class="hljs-string">${OPENSTACK_SWIFT_STORAGE_REGION}</span>
</code></pre>
<h5><a class="anchor" aria-hidden="true" id="step-1-change-the-credential-keys"></a><a href="#step-1-change-the-credential-keys" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Step 1: Change the credential keys</h5>
<p>Since the new SDK uses <em>Application Credentials</em> to authenticate OpenStack, we
need to change the keys <code>credentials.username</code> to <code>credentials.id</code>,
<code>credentials.password</code> to <code>credentials.secret</code> and use Application Credential ID
and secret here. For more detail about credentials look
<a href="https://docs.openstack.org/api-ref/identity/v3/?expanded=password-authentication-with-unscoped-authorization-detail,authenticating-with-an-application-credential-detail#authenticating-with-an-application-credential">here</a>.</p>
<h5><a class="anchor" aria-hidden="true" id="step-2-remove-the-unused-keys"></a><a href="#step-2-remove-the-unused-keys" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Step 2: Remove the unused keys</h5>
<p>Since the new SDK doesn't use the old way authentication, we don't need the keys
<code>openStackSwift.keystoneAuthVersion</code>, <code>openStackSwift.domainId</code>,
<code>openStackSwift.domainName</code> and <code>openStackSwift.region</code>. So you can remove them.</p>
<h5><a class="anchor" aria-hidden="true" id="step-3-add-swift-url"></a><a href="#step-3-add-swift-url" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Step 3: Add Swift URL</h5>
<p>The new SDK needs the OpenStack Swift connection URL for connecting the Swift.
So you need to add a new key called <code>openStackSwift.swiftUrl</code> and give the
OpenStack Swift url here. Example url should look like that:
<code>https://example.com:6780/swift/v1</code></p>
<h5><a class="anchor" aria-hidden="true" id="thats-it"></a><a href="#thats-it" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>That's it!</h5>
<p>Your new configuration should look like that!</p>
<pre><code class="hljs css language-yaml"><span class="hljs-attr">techdocs:</span>
  <span class="hljs-attr">publisher:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">'openStackSwift'</span>
    <span class="hljs-attr">openStackSwift:</span>
      <span class="hljs-attr">containerName:</span> <span class="hljs-string">'name-of-techdocs-storage-bucket'</span>
      <span class="hljs-attr">credentials:</span>
        <span class="hljs-attr">id:</span> <span class="hljs-string">${OPENSTACK_SWIFT_STORAGE_APPLICATION_CREDENTIALS_ID}</span>
        <span class="hljs-attr">secret:</span> <span class="hljs-string">${OPENSTACK_SWIFT_STORAGE_APPLICATION_CREDENTIALS_SECRET}</span>
      <span class="hljs-attr">authUrl:</span> <span class="hljs-string">${OPENSTACK_SWIFT_STORAGE_AUTH_URL}</span>
      <span class="hljs-attr">swiftUrl:</span> <span class="hljs-string">${OPENSTACK_SWIFT_STORAGE_SWIFT_URL}</span>
</code></pre>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 3/25/2022</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/features/techdocs/configuration"><span class="arrow-prev">← </span><span class="function-name-prevnext">TechDocs Configuration Options</span></a><a class="docs-next button" href="/docs/features/techdocs/configuring-ci-cd"><span class="function-name-prevnext">Configuring CI/CD to generate and publish TechDocs sites</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#configuring-google-gcs-bucket-with-techdocs">Configuring Google GCS Bucket with TechDocs</a></li><li><a href="#configuring-aws-s3-bucket-with-techdocs">Configuring AWS S3 Bucket with TechDocs</a></li><li><a href="#configuring-azure-blob-storage-container-with-techdocs">Configuring Azure Blob Storage Container with TechDocs</a></li><li><a href="#configuring-openstack-swift-container-with-techdocs">Configuring OpenStack Swift Container with TechDocs</a></li><li><a href="#bonus-migration-from-old-openstack-swift-configuration">Bonus: Migration from old OpenStack Swift Configuration</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><div class="footer-title"><a href="/"><h2 class="footerLogo"></h2></a></div><div><h5>Docs</h5><a href="/docs/overview/what-is-backstage">What is Backstage?</a><a href="/docs/getting-started/">Getting started</a><a href="/docs/features/software-catalog/software-catalog-overview">Software Catalog</a><a href="/docs/plugins/create-a-plugin">Create a Plugin</a><a href="/docs/dls/design">Designing for Backstage</a></div><div><h5>Community</h5><a href="https://discord.gg/MUpMjP2">Support chatroom</a><a href="https://github.com/backstage/backstage/blob/master/CONTRIBUTING.md">Contributing</a><a href="https://backstage.spotify.com">Adopting</a><a href="https://github.com/backstage/community">Community Sessions</a><a href="https://mailchi.mp/spotify/backstage-community">Subscribe to our newsletter</a><a href="https://www.cncf.io/sandbox-projects/">CNCF Incubation</a></div><div><h5>More</h5><a href="https://spotify.github.io/">Open Source @ Spotify</a><a href="https://engineering.atspotify.com/">Spotify Engineering Blog</a><a href="https://developer.spotify.com/">Spotify for Developers</a><a href="https://github.com/backstage/backstage">GitHub</a><a class="github-button" href="https://github.com/backstage/backstage" data-icon="octicon-star" data-count-href="/backstage/backstage/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a><div class="social"><a href="https://twitter.com/SpotifyEng" class="twitter-follow-button">Follow @SpotifyEng</a></div></div></section><p style="text-align:center"><a href="https://spotify.github.io">Made with ❤️ at Spotify</a></p><p class="copyright">Copyright © 2022 Backstage Project Authors. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our Trademark Usage page: https://www.linuxfoundation.org/trademark-usage</p></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>window.twttr=(function(d,s, id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return t;js=d.createElement(s);js.id=id;js.src='https://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js, fjs);t._e = [];t.ready = function(f) {t._e.push(f);};return t;}(document, 'script', 'twitter-wjs'));</script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '8d115c9875ba0f4feaee95bab55a1645',
                indexName: 'backstage',
                inputSelector: '#search_input_react'
              });
            </script></body></html>